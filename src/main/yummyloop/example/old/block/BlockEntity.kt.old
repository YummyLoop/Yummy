package yummyloop.example.old.block

import net.minecraft.block.Block
import net.minecraft.block.entity.BlockEntityType
import yummyloop.example.config.ModConfig
import java.util.function.Supplier
import kotlin.reflect.KFunction0
import net.minecraft.block.entity.BlockEntity as VanillaBlockEntity

abstract class BlockEntity(type : BlockEntityType<*>) : VanillaBlockEntity(type) {
    companion object{
        /**
         * Creates a new blockEntity type
         * @param entity blockEntity constructor
         * @param blocks list of supported blocks = Tickable + ?render
         */
        fun <T : VanillaBlockEntity> createType(entity : KFunction0<T>, blocks : List<Block?>) : BlockEntityType<T> {
            if (blocks.contains(null)) ModConfig.logger.fatal("null block for BlockEntity")
            return BlockEntityType.Builder.create(Supplier(entity), *blocks.toTypedArray()).build(null)
        }
    }
}